  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	%{
		business.User currUser = business.User.currUser();
		business.BackstageSet  currBackstageSet = business.BackstageSet.getCurrentBackstageSet();
		String platUrl = constants.Constants.BASE_URL;
		java.util.Map<String,java.util.List<business.BottomLinks>> bottomLinks = business.BottomLinks.currentBottomlinks();
		java.lang.String type1Name = business.NewsType.queryName(1);
		java.lang.String type2Name = business.NewsType.queryName(2);
		java.lang.String type4Name = business.NewsType.queryName(4);
		boolean ipsEnable = constants.Constants.IPS_ENABLE;
		boolean debtUse = constants.Constants.DEBT_USE;
	}%
		<title>#{get 'title' /}</title>
		<meta name="keywords" content="${currBackstageSet?.seoKeywords}" />
		<meta name="description" content="${currBackstageSet?.seoDescription}" />
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<meta property="qc:admins" content="133011667666155146375" />
		<meta property="wb:webmaster" content="6582954f8f7d9e1d" />
		<link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon2.ico'}">
				
		<link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/reset.css'}" />
		<link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/temp.css'}" />
		<link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/site.css'}" />
		<script type="text/javascript" src="@{'/public/javascripts/jquery-1.11.2.min.js'}"></script>
		
		<script type="text/javascript" src="@{'/public/javascripts/koala.min.1.5.js'}"></script>
		<script type="text/javascript" src="@{'/public/javascripts/jquery-2.0.js'}"></script>
		<script type="text/javascript" src="@{'/public/javascripts/jquery.json-2.4.min.js'}"></script>
		<script type="text/javascript" src="@{'/public/javascripts/xf_front.js'}"></script>
		<script charset="utf-8" src="@{'public/javascripts/ajaxfileupload.js'}"></script>
		<script type="text/javascript" src="@{'/public/javascripts/common.js'}"></script>
		<script type="text/javascript" src="@{'/public/javascripts/jquery.lazyload.min.js'}"></script>
		<script type="text/javascript" src="@{'/public/javascripts/ppcommon.js'}"></script>
		
		<script>
				var _hmt = _hmt || [];
				(function() {
				  var hm = document.createElement("script");
				  hm.src = "//hm.baidu.com/hm.js?4ce1beb6632c52346e1035e69add148c";
				  var s = document.getElementsByTagName("script")[0]; 
				  s.parentNode.insertBefore(hm, s);
				})();
		</script>
																  
	</head>
	<body>
	<!-- 右边悬浮框 -->
	<div class="p_rt_xfbox">
	    <ul class="p_rt_xful">
	        <li><a href="@{front.home.HomeAction.wealthToolkit(4)}" class="p_rt_a01" title="收益计算器" target="_blank"></a></li>

	        <li class="p_go_top none"><a class="p_rt_a04" title="回到顶部"></a></li>
	    </ul>
	</div>
	
	<!-- header头部 -->
	<div class="p_header">
	    <div class="p_topbox">
	        <div class="p_top clr">
	            <div class="p_top_left">
	                <a href="http://weibo.com/u/2219448503" target="_blank" title="" class="p_top_abt">关注我们<i></i></a>
	            </div>
	            <div class="p_top_right">
	                <span class="p_top_helo"><i></i>
	                #{if currUser == null}
	                  	您好，欢迎来到${currBackstageSet?.platformName}！
	                #{/if}
	                #{else}
	                  	您好，【<a href="@{front.account.AccountHome.home()}">${currUser?.name}</a>】
	                #{/else}
	                <!--<a href="#">用户名</a>，您好，欢迎来到晓风网贷！--></span>
	                <a id="helpIndex" href="@{front.help.HelpCenterAction.index(13)}" target="_self"  title="" class="p_top_rta">帮助中心</a>
	                #{if currUser == null}
	                	<a id="loginIndex" href="@{front.account.loginAndRegisterAction.login()}" title="" class="p_top_rta">立即登录</a>
	                #{/if}
                	#{else}
	                  	<a id="registerIndex" href="@{front.account.loginAndRegisterAction.logout()}" title="" class="p_top_rta">安全退出</a>
	                #{/else}
	            </div>
	        </div>
	    </div>
	    					
	    
	    <div class="p_headbox">
	        <div class="p_head clr">
	            <div class="p_logobox">
	                <a href="/" class="p_logo"><img src="${currBackstageSet?.platformLogoFilename}" alt="" /></a>
	            </div>
	            <div class="p_navbox">
	                <ul class="p_navul clr">
	                    <li ><a id="index" href="/" title="" >首页<i></i></a></li>
	                    <li ><a id="bid" href="@{front.bid.bidAction.index()}" title="">我要借款<i></i></a></li>
	                    <li><a id="invests" href="@{front.invest.InvestAction.investHome()}" title="">我要理财<i></i></a></li>
	                    #{if debtUse}
	                    <li><a id="claim" href="@{front.debt.debtAction.debtHome()}" title="">债权转让<i></i></a></li>
	                    #{/if}
	                    <li><a id="usr" href="@{front.account.accountHome.home()}" title="">我的账户<i></i></a></li>
	                    <li>
	                        <a id="aboutUs" href="@{front.home.HomeAction.restAboutUs(16)}" title="">关于我们<i></i></a>
	                        <span class="p_navmore"></span>
	                        <dl class="p_navhidl">
	                            <dd><a id="aboutUs1" href="@{front.home.HomeAction.restAboutUs(16)}">公司简介</a></dd>
	                            <dd><a id="principal" href="@{front.wealthinfomation.WealthInfomationAction.restHome(7)}">${type1Name}</a></dd>
	                            <dd><a id="wealth" href="@{front.principal.PrincipalGuaranteeAction.principalGuaranteeHome()}">${type4Name}</a></dd>
	                            <dd><a id="aboutUs2" href="@{front.home.HomeAction.restAboutUs(34)}">媒体报道</a></dd>
	                            <dd><a id="aboutUs3" href="@{front.home.HomeAction.restAboutUs(20)}">联系我们</a></dd>
	                        </dl>
	                    </li>
	                </ul>
	            </div>
	        </div>
    	</div>
	    
	</div>
        <div class="p_zc_mainbox" style="background: url(@{'/public/images/p_zc_banner.jpg'}) no-repeat center center;">
    <div class="p_main p_zc_main clr">
        <div class="p_zc_wordbox">
           <h4>免费注册</h4>
           #{form @front.account.loginAndRegisterAction.registering(), id:'submit'}
            <table class="p_zc_table">
                <tr height="53">
                   <th>用户名：</th>
                   <td>
                        <div class="p_zc_inbox01" style="width: 300px;">
                            <i class="p_zc_icon01"></i>
                            <input id="userName" name="userName" type="text" class="p_zc_inp01 p_pass" style="width: 260px;"/>
                            <label class="p_zc_tips" style="width: 265px;">2~10位字符，可使用字母、数字，或中文</label>
                        </div>
                         <p class="s_loginerror" style="display:none;" id="s_userName"><i>◆</i></p>
                         
                   </td>
                </tr>
                <tr height="53">
                   <th>手机号：</th>
                   <td>
                        <div class="p_zc_inbox01" style="width: 300px;">
                            <i class="p_zc_icon02"></i>
                            <input id="mobile" name="mobile" type="text" value="${flash?.mobile}" class="p_zc_inp01 p_pass" style="width: 260px;"/>
                            <label class="p_zc_tips" style="width: 265px;">请输入您的手机号码</label>
                        </div>
                        <p class="s_loginerror" style="display:none;" id="s_mobile"><i>◆</i></p>
                   </td>
                </tr>
                <tr height="53">
                   <th>密&nbsp;&nbsp;码：</th>
                   <td>
                        <div class="p_zc_inbox01" style="width: 300px;">
                            <i class="p_zc_icon03"></i>
                            <input id="password" name="password" type="password" class="p_zc_inp01 p_pass" style="width: 260px;"/>
                            <label class="p_zc_tips" style="width: 265px;">请输入密码</label>
                        </div>
                        <p class="s_loginerror" style="display:none;" id="s_password"><i>◆</i></p>
                   </td>
                </tr>
                <!-- <tr height="53">
                   <th>确认密码：</th>
                   <td>
                        <div class="p_zc_inbox01">
                            <i class="p_zc_icon03"></i>
                            <input type="password" class="p_zc_inp01 p_pass" />
                            <label class="p_zc_tips">请再次输入密码</label>
                        </div>
                        <p class="s_loginerror" style="display:block;"><i>◆</i></p>
                   </td>
                </tr> -->
                <tr height="53">
                   <th>推荐人：</th>
                   <td>
                        <div class="p_zc_inbox01" style="width: 300px;">
                            <i class="p_zc_icon04"></i>
                            #{if flash.recommendUserName != null && flash.recommendUserName != ''}
                            	<input id="recommended" name="recommended" value="${flash?.recommendUserName}"  readonly="readonly" type="text" class="p_zc_inp01 p_pass" style="width: 260px;"/>
                            #{/if}
                            #{else}
                             <input id="recommendName" name="recommendName" type="text" class="p_zc_inp01 p_pass" style="width: 260px;"/>
                             <label class="p_zc_tips" style="width: 265px;">请填写邀请码/推荐人(可不填)</label>
                            #{/else}
                            
                        </div>
                        <p class="s_loginerror" style="display:none;" id="s_recommended"><i>◆</i></p>
                   </td>
                </tr>
                <tr height="53">
                   <th>验证码：</th>
                   <td>
                        <div class="p_zc_inbox02">
                            <i class="p_zc_icon05"></i>
                            <input id="code" name="code" type="text" class="p_zc_inp02 p_pass" />
                            <label class="p_zc_tips">请输入验证码</label>
                        </div>
                        <a href="#" title="" class="p_zc_yanzm"><img src="" onclick="change()" id="img" alt="" width="78" height="36" /></a>
                        <input type="hidden" name="randomID" id = "randomID" />
                        <a href="#" title="" onclick="change()" class="p_zc_ychange p_un">换一张</a>
                        <p class="s_loginerror" style="display:none;" id="s_code"><i>◆</i></p>
                   </td>
                </tr>
                <tr height="53">
                   <th>短信验证码：</th>
                   <td>
                        <div class="p_zc_inbox02">
                            <i class="p_zc_icon05"></i>
                            <input id="smsCode" name="smsCode" type="text" class="p_zc_inp02 p_pass" />
                            <label class="p_zc_tips">请输入验证码</label>
                        </div>
                        <a href="#" title="" id="sendSmsCode" onclick="sendCode();focusError();" class="p_hqyanzm p_op">点击获取</a>
                        <p class="s_loginerror" style="display:none;" id="s_smsCode"><i>◆</i></p>
                   </td>
                </tr>
                <tr height="46">
                    <th>&nbsp;</th>
                    <td>
                        <input type="checkbox" class="p_zc_in03" id="suggest" />
                        <span class="p_zc_woyi f12" >我已阅读并同意 </span>
                        <a href="#" title="" onclick="showProtocol()" class="p_zc_xieyi f12">《${currBackstageSet?.platformName}用户注册协议》</a>
                    </td>
                </tr>
                <tr height="55">
                    <th>&nbsp;</th>
                    <td><a href="#" title="" class="p_zc_btn p_op" onclick="register();focusError();" style="width: 300px;">马上注册</a></td>
                </tr>
                <tr height="32">
                    <th>&nbsp;</th>
                    <td>
                        <div class="p_pl185">
                            <span class="f12">已有账号？</span><a href="@{front.account.loginAndRegisterAction.login()}" title="" class="p_zc_dla p_un">立即登录</a>
                        </div>
                    </td>
                </tr>
            </table>
            #{/form}
        </div>
    </div> 
</div>
#{include "front/account/LoginAndRegisterAction/register.control"/}
        <!--底部-->
		<div class="p_footer_box02">
    <div class="p_main clr">
        <div class="p_ft_2left">
            <div class="p_ft_word2">
                <p>${currBackstageSet?.companyName}</p>
                <p>总部地址：${currBackstageSet?.companyAddress}</p>
                <p>${currBackstageSet?.siteIcpNumber}</p>
            </div>
        </div>
        <div class="p_ft_2right clr">
            <div class="p_ft_icon clr">
                <a href="http://cn.norton.com" class="p_ft_a01"></a>
            </div>
        </div>
    </div>
</div>
		#{include "front/account/AccountHome/overBorrowIps.control"/}
		#{include "common/homeVipApply2.control"/}
    </body>
    
<script type="text/javascript">
  $(document).keydown(function(event){
    if(event.keyCode == 13){
      if(document.activeElement.id == 'name' || document.activeElement.id == 'code' || document.activeElement.id == 'password'){
    	  login();
      }
    }
  });
  
  $(function(){
	$('img.lazy').lazyload({ 
	  //effect:'fadeIn' 
	});
    $("#xf_h_idx_1_hydjfdgdf").limit();
	   
    /* 所有继承页面flash.error的值弹框,被继承页面则无需再写 */
    if('${flash.error}' !='') {
	      alert('${flash?.error}');
      if('${flash?.emailUrl}' !='') {
        window.open('${flash?.emailUrl}');
      }
    }
	/*与重复提交冲突，注释，如功能发生冲突，请更改其他处
    if('${flash.success}' != ''){
      alert('${flash?.success}');
    }
	*/  	
    //获取图片验证码
    if('${currUser?.name}' == '' && '${loginOrRegister}' == '') {
      var setCode = #{jsAction @front.account.LoginAndRegisterAction.setCode()/}
      $.post(setCode({}),function(data){
        var arr=eval(data);
        var img = arr.img;
        $("#img").attr("src","@{front.account.LoginAndRegisterAction.getImg()}?id="+img)	
		$("#randomID").val(img);
	  });
	}
  });
  
  function vipApply(){
	  
	  /** 检查用户是否激活*/
	  var result = frontJSIntercepter();
	  
	  if(!result){
      	 showDiv($("#xf_mem_acc_sjvip_tcc")); 
	  }
  };

  function login(){
    var name = $("#name").val();
           
    if(name == ''){
      alert("请输入用户名或邮箱");
      return;
    }

    if($("#password").val() == ''){
      alert("请输入密码");
      return;
    }

    if($("#code").val() == ''){
      alert("请输入验证码");
      return;
    }
    $("#submit").submit();
  };

  function change(){
    var setCode = #{jsAction @front.account.LoginAndRegisterAction.setCode()/}
	$.post(setCode({}),function(data){
	  var arr=eval(data);
	  var img = arr.img;
	  $("#img").attr("src","@{front.account.LoginAndRegisterAction.getImg()}?id="+img);
	  $("#randomID").val(img);	
	});
  };
  
  function AddFavorite(url,title) {
    var ua = navigator.userAgent.toLowerCase();
    if(ua.indexOf("msie 8")>-1){
      external.AddToFavoritesBar(url,title,'');//IE8
    }else{
      try {
        window.external.addFavorite(url, title);
      } catch(e) {
        try {
          window.sidebar.addPanel(title, url, "");//firefox
        } catch(e) {
          alert("加入收藏失败，请使用Ctrl+D进行添加");
        }
      }
    }
  }
  
  /** 前台，拦截器 ，拦截内容：登陆拦截，资金托管开户拦截，已被拦截返回true */
  function frontJSIntercepter(){
	  //未登录 
	  if('${currUser?.name}' == ''){  
		  
		  window.location.href=http_path+"/login";
	  	  return true;
	  }
	  
	  //托管未开户 
	  if('${ipsEnable}'=='true' && '${currUser?.ipsAcctNo}'==''){
		  
		  window.location.href=http_path+"/front/account/trustAccount";
	  	  return true;
	  }

	  //用户未激活
	  if('${ipsEnable}'=='false' && '${currUser?.isEmailVerified}'=='false' && '${currUser?.isMobileVerified}'=='false'){  //邮箱和手机都未激活，则用户未激活
		 
		  window.location.href=http_path+"/front/account/inactiveUser";
		  return true;
	  }
	  
	  if('${currUser?.realityName}' == ''){
	  		
	  		window.location.href=http_path+"/front/account/certification";
	  		return true;
	  }
	  
	  return false;
	  
  }
  
  /**
   * 拦截器拦截后，跳转到相应的页面（AJAX）
   */
  function checkIntercepterResult(data){
  	
  	
  	if('UnLogin' == data){
  		
  		window.location.href=http_path+"/login";
  		return true;
  	}
  	
  	if('NullIpsAccount' == data){
  		
  		window.location.href=http_path+"/front/account/trustAccount";
  		return true;
  	}
  	
  	if('InactiveUser' == data){
  		
  		window.location.href=http_path+"/front/account/inactiveUser";
  		return true;
  	}
  	
  	if('NullRealName' == data){
  		
  		window.location.href=http_path+"/front/account/certification";
  		return true;
  	}
  	
  	return false;
  	
 }
</script>
<script type="text/javascript">
$(function(){
   	$('#registerIndex').addClass("cozhuse");
	
    var setCode = #{jsAction @front.account.loginAndRegisterAction.setCode()/}
		$.post(setCode({}),function(data){
			var arr=eval(data);
			var img = arr.img;
			$("#img").attr("src","@{front.account.loginAndRegisterAction.getImg()}?id="+img);	
			$("#randomID").val(img);
	});
	$(".xf_wyjkfb_4_windowClose").click(function(){
		$(this).parents(".xf_zqzr_znx_window").hide(300);
	});
	
	
});

function showProtocol() {

	showDiv($("#xf_mem_zc_xytc"));
}

function change(){
	var setCode = #{jsAction @front.account.loginAndRegisterAction.setCode()/}
	$.post(setCode({}),function(data){
	var arr=eval(data);
	var img = arr.img;
	$("#randomID").val(img);
	$("#img").attr("src","@{front.account.loginAndRegisterAction.getImg()}?id="+img)	
	});
}
</script>

<script type="text/javascript">
   
   var bRecommendedName = 0;
   var bRecommendedNameMsg = "";
   var bName = 0;
   var bEmail = 0;
	
   $(document).ready(function(){
	   $("form :input").blur(function(){ 
	   
	   if($(this).attr("id") == "userName"){
	   
	     if(this.value==""){
	    	  document.getElementById("s_userName").style.display="block";
	           $("#s_userName").removeClass("xf_register_intext");
	           $("#s_userName").removeClass("xf_register_intext3");
			   $("#s_userName").addClass("xf_register_intext1");
	           $("#s_userName").html("请填写用户名");
	     }else if(this.value.length < 2){ 
	    	 document.getElementById("s_userName").style.display="block";
	           $("#s_userName").removeClass("xf_register_intext");
	           $("#s_userName").removeClass("xf_register_intext3");
			   $("#s_userName").addClass("xf_register_intext1");
	           $("#s_userName").html("用户名长度过短");
	     }else if(this.value.length > 10){
	    	 document.getElementById("s_userName").style.display="block";
	           $("#s_userName").removeClass("xf_register_intext");
	           $("#s_userName").removeClass("xf_register_intext3");
			   $("#s_userName").addClass("xf_register_intext1");
	           $("#s_userName").html("用户名长度过长");
	     }else if(!/^[\u4E00-\u9FA5A-Za-z0-9_]+$/.test(this.value)){
	    	 document.getElementById("s_userName").style.display="block";
	           $("#s_userName").removeClass("xf_register_intext");
	           $("#s_userName").removeClass("xf_register_intext3");
			   $("#s_userName").addClass("xf_register_intext1");
	           $("#s_userName").html("用户名含有敏感字符");
	     }else{
	          var name = this.value;
	          var hasNameExist = #{jsAction @front.account.loginAndRegisterAction.hasNameExist(':name')/}
			  $.post(hasNameExist({name:encodeURI(name)}),function(data){
				
			  var arr=eval(data);
			  
			  if(arr.error.code < 0){
			  	   bName = -1;
			  	 document.getElementById("s_userName").style.display="block";
			  	   $("#s_userName").removeClass("xf_register_intext");
		           $("#s_userName").removeClass("xf_register_intext3");
				   $("#s_userName").addClass("xf_register_intext1");
		           $("#s_userName").html(arr.error.msg);
			    }else{
			       bName = 0;
			       document.getElementById("s_userName").style.display="none";
			       $("#s_userName").removeClass("xf_register_intext1");
			       $("#s_userName").removeClass("xf_register_intext");
			       $("#s_userName").addClass("xf_register_intext3");
				   $("#s_userName").html("&nbsp;");
			    }
	          });
	         }
	         
	     }
	   
	   
	    
	   if($(this).attr("id")=="recommendName"){
	       var name = this.value;
	       if(name == null || name.trim() == '' ){
	          $("#s_recommended").html("");
	          return;
	       }
            var hasNameExist = #{jsAction @front.account.loginAndRegisterAction.checkRecommendName(':name')/}
			  $.post(hasNameExist({name:encodeURI(name)}),function(data){

			  if(data.code == -2){
			       bRecommendedName = 0;
			       $("#s_recommended").removeClass("xf_register_intext1");
			       $("#s_recommended").removeClass("xf_register_intext");
			       $("#s_recommended").addClass("xf_register_intext3");
				   $("#s_recommended").html("");
				   document.getElementById("s_recommended").style.display="none";
			  }else if(data.code == 0){
				  bRecommendedName = -1;
			      bRecommendedNameMsg = "该推荐人不存在";
			      $("#s_recommended").removeClass("xf_register_intext");
		          $("#s_recommended").removeClass("xf_register_intext3");
				  $("#s_recommended").addClass("xf_register_intext1");
		          $("#s_recommended").html(bRecommendedNameMsg);
		          document.getElementById("s_recommended").style.display="block";
			  }else{
			        bRecommendedName = -2;
			        bRecommendedNameMsg = data.msg;
			  	   $("#s_recommended").removeClass("xf_register_intext");
		           $("#s_recommended").removeClass("xf_register_intext3");
				   $("#s_recommended").addClass("xf_register_intext1");
		           $("#s_recommended").html(bRecommendedNameMsg);
		           document.getElementById("s_recommended").style.display="block";
			    }
	          });
	    }
	    
	    /* if($(this).attr("id")=="recommendName"){
	    	
	       var name = this.value;
	       if(name == null || name.trim() == '' ){
	          $("#s_recommended").html("");
	          return;
	       }
	      
            var hasNameExist = #{jsAction @front.account.loginAndRegisterAction.hasNameExist(':name')/}
			  $.post(hasNameExist({name:encodeURI(name)}),function(data){
			  var arr=eval(data);
			  if(arr.error.code == -2){
				  
			        bRecommendedName = 0;
			       $("#s_recommended").removeClass("xf_register_intext1");
			       $("#s_recommended").removeClass("xf_register_intext");
			       $("#s_recommended").addClass("xf_register_intext3");
				   $("#s_recommended").html("&nbsp;");
			  }else if(arr.error.code == 0){
				  
				   document.getElementById("s_recommended").style.display="block";
				   bRecommendedName = -1;
			       bRecommendedNameMsg = "请填写正确的邀请码";
			      $("#s_recommended").removeClass("xf_register_intext");
		          $("#s_recommended").removeClass("xf_register_intext3");
				  $("#s_recommended").addClass("xf_register_intext1");
		          $("#s_recommended").html("请填写正确的邀请码");
		          
			  }else{
				   
			        bRecommendedName = -2;
			        bRecommendedNameMsg = arr.error.msg;
			  	   $("#s_recommended").removeClass("xf_register_intext");
		           $("#s_recommended").removeClass("xf_register_intext3");
				   $("#s_recommended").addClass("xf_register_intext1");
		           $("#s_recommended").html(bRecommendedNameMsg);
			    }
	          });
	    }*/
	     
	     if($(this).attr("id") == "mobile"){
			   
		     if(this.value == ""){
		    	 document.getElementById("s_mobile").style.display="block";
		          $("#s_mobile").removeClass("xf_register_intext");
		          $("#s_mobile").removeClass("xf_register_intext3");
				  $("#s_mobile").addClass("xf_register_intext1");
		          $("#s_mobile").html("请输入手机号码");  
		     }else{
		    	 $.ajax({
		    		  url : "@{front.account.LoginAndRegisterAction.hasMobileExists()}",
		    		  type : "POST",
		    		  data : {
		    			  "mobile" : this.value
		    		  },
		    		  dataType:'json',
		    		  success : function(data) {
		    			  if(data.code < 0){
		    				  document.getElementById("s_mobile").style.display="block";
		    				  $("#s_mobile").removeClass("xf_register_intext");
					          $("#s_mobile").removeClass("xf_register_intext3");
							  $("#s_mobile").addClass("xf_register_intext1");
					          $("#s_mobile").html(data.msg);  
		    			  }else{
		    				  document.getElementById("s_mobile").style.display="none";
		    					$("#s_mobile").removeClass("xf_register_intext1");
		   		           		$("#s_mobile").removeClass("xf_register_intext");
		   				    	$("#s_mobile").addClass("xf_register_intext3");
		    					$("#s_mobile").html('&nbsp;');  
		    			  }
		    			},
		    		 });
		     } 
		   }
	   
	   if($(this).attr("id") == "password"){
	   
	     if(this.value == ""){
	    	 document.getElementById("s_password").style.display="block";
	          $("#s_password").removeClass("xf_register_intext");
	          $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
	          $("#s_password").html("请设置密码");  
	     }else if(this.value.length < 6){
	    	 document.getElementById("s_password").style.display="block";
	          $("#s_password").removeClass("xf_register_intext");
	          $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
	          $("#s_password").html("密码长度过短"); 
	     }else if(this.value.length >20){
	    	 document.getElementById("s_password").style.display="block";
	          $("#s_password").removeClass("xf_register_intext");
	          $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
	          $("#s_password").html("密码长度过长"); 
	     }else if(!/^([^\s'‘’]{6,20})$/.test(this.value)){
	          $("#s_password").removeClass("xf_register_intext");
	          $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
	     	  $("#s_password").html("密码含有敏感字符");
	     	 document.getElementById("s_password").style.display="block";
	     }
	     else{
	           $("#s_password").removeClass("xf_register_intext1");
	           $("#s_password").removeClass("xf_register_intext");
			   $("#s_password").addClass("xf_register_intext3");
	           $("#s_password").html("&nbsp;"); 
	           document.getElementById("s_password").style.display="none";
	     }
	   }
   });	 
 });
       
	 //注册	
	 
	 
     function register(){
    	 
    	 
     	 var username = $.trim($("#userName").val());
     	 
	     if(username =='' ||　username == "请输入用户名"){
	    	 document.getElementById("s_userName").style.display="block";
	    	 $("#s_userName").removeClass("xf_register_intext");
	         $("#s_userName").removeClass("xf_register_intext3");
			 $("#s_userName").addClass("xf_register_intext1");
	         $("#s_userName").html("请填写用户名");
	          return;
	     }else if(username.length < 2){ 
	    	 document.getElementById("s_userName").style.display="block";
	    	 $("#s_userName").removeClass("xf_register_intext");
	         $("#s_userName").removeClass("xf_register_intext3");
			 $("#s_userName").addClass("xf_register_intext1");
	         $("#s_userName").html("用户名长度为2-10个字符");
	          return;
	     }else if(username.length > 10){
	    	 $("#s_userName").removeClass("xf_register_intext");
	    	 document.getElementById("s_userName").style.display="block";
	         $("#s_userName").removeClass("xf_register_intext3");
			 $("#s_userName").addClass("xf_register_intext1");
	         $("#s_userName").html("用户名长度为2-10个字符");
	          return;
	     }else if(!/^[\u4E00-\u9FA5A-Za-z0-9_]+$/.test(username)){
	    	 document.getElementById("s_userName").style.display="block";
	    	 $("#s_userName").removeClass("xf_register_intext");
	         $("#s_userName").removeClass("xf_register_intext3");
			 $("#s_userName").addClass("xf_register_intext1");
	         $("#s_userName").html("用户名不能含有特殊字符"); 
	          return;
	     }else if(bName < 0){
	    	 document.getElementById("s_userName").style.display="block";
	    	 $("#s_userName").removeClass("xf_register_intext");
	         $("#s_userName").removeClass("xf_register_intext3");
			 $("#s_userName").addClass("xf_register_intext1");
	         $("#s_userName").html("该用户名已存在"); 
		      return;
	    }else{

	    	document.getElementById("s_userName").style.display="none";
	    	
	     	}
	     
	     
 		/*var email = $("#email").val();
		 
         if(email == ""|| email=="请输入您常用的邮箱地址"){
        	document.getElementById("s_email").style.display="block";
      	    $("#s_email").removeClass("xf_register_intext");
  	        $("#s_email").removeClass("xf_register_intext3");
  			$("#s_email").addClass("xf_register_intext1");
  	        $("#s_email").html("请填写邮箱地址"); 
          	return;
         }else if(!(email).isEmail()){
        	document.getElementById("s_email").style.display="block";
      	    $("#s_email").removeClass("xf_register_intext");
  	        $("#s_email").removeClass("xf_register_intext3");
  			$("#s_email").addClass("xf_register_intext1");
  	        $("#s_email").html("请填写正确的邮箱地址"); 
          	return;
         }else if(bEmail < 0){
        	document.getElementById("s_email").style.display="block";
      	    $("#s_email").removeClass("xf_register_intext");
  	        $("#s_email").removeClass("xf_register_intext3");
  			$("#s_email").addClass("xf_register_intext1");
  	        $("#s_email").html("对不起，该邮箱已存在"); 
              return;
         }else{

 	    	document.getElementById("s_email").style.display="none";
 	    	
 	     	}*/
	   
	     var password = $("#password").val();
	     	
	      if(password == "" || password=="请输入密码"){
	    	  document.getElementById("s_password").style.display="block";
	    	  $("#s_password").removeClass("xf_register_intext");
		      $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
		      $("#s_password").html("请设置您的密码");
	          return; 
	      }else if(password.length < 6){
	    	  document.getElementById("s_password").style.display="block";
	    	  $("#s_password").removeClass("xf_register_intext");
		      $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
		      $("#s_password").html("密码长度为6-20个字符");
	         return;
	      }else if(password.length >20){
	    	  document.getElementById("s_password").style.display="block";
	    	  $("#s_password").removeClass("xf_register_intext");
		      $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
		      $("#s_password").html("密码长度为6-20个字符");
	          return;
	      }else if(!/^([^\s'‘’]{6,20})$/.test(password)){
	    	  document.getElementById("s_password").style.display="block";
	    	  $("#s_password").removeClass("xf_register_intext");
		      $("#s_password").removeClass("xf_register_intext3");
			  $("#s_password").addClass("xf_register_intext1");
		      $("#s_password").html("密码由6-20位字符组成（不含'）");
	     	  return;
	      }else{

		    	document.getElementById("s_password").style.display="none";
		    	
		     	}
	        
	      var recommendName = $("#recommendName").val();
	      
	      if(recommendName != null && recommendName.trim() !="" && bRecommendedName < 0){
	    		
		    	$("#s_recommended").removeClass("xf_register_intext");
		        $("#s_recommended").removeClass("xf_register_intext3");
				$("#s_recommended").addClass("xf_register_intext1");
		        $("#s_recommended").html(bRecommendedNameMsg); 
			     
		  }else{

		       document.getElementById("s_recommended").style.display="none";
		    	
		       }
	      
	      var mobile = $.trim($("#mobile").val());
			 
	         if(mobile == ""){
	        	 document.getElementById("s_mobile").style.display="block";
	        	 $("#s_mobile").removeClass("xf_register_intext");
		         $("#s_mobile").removeClass("xf_register_intext3");
				 $("#s_mobile").addClass("xf_register_intext1");
		         $("#s_mobile").html("请输入手机号码");
	          	return;
	         }else if(!(mobile).isMobileNum()){
	        	 document.getElementById("s_mobile").style.display="block";
	        	 $("#s_mobile").removeClass("xf_register_intext");
		         $("#s_mobile").removeClass("xf_register_intext3");
				 $("#s_mobile").addClass("xf_register_intext1");
		         $("#s_mobile").html("手机号格式有误");
	          	return;
	         }else{
	        	 document.getElementById("s_mobile").style.display="none";
				$("#s_mobile").removeClass("xf_register_intext1");
           		$("#s_mobile").removeClass("xf_register_intext");
		    	$("#s_mobile").addClass("xf_register_intext3");
				$("#s_mobile").html('&nbsp;');  
	         }
	         

	      if($("#code").val() == '' || $("#code").val() =="请输入验证码") {
	    	  document.getElementById("s_code").style.display="block";
	    	  $("#s_code").removeClass("xf_register_intext");
	    	  $("#s_code").removeClass("xf_register_intext3");
	    	  $("#s_code").addClass("xf_register_intext1");
	    	  $("#s_code").html("请输入验证码");
	   		  return;
	      }else{

		    	document.getElementById("s_code").style.display="none";
		    	
		     	} 
	      
	      /* else{
		    	$("#s_code").removeClass("xf_register_intext1");
		    	$("#s_code").html("验证码错误");
	       }*/
	      
	      var smsCode = $("#smsCode").val();

	       if(smsCode == ""){
	    	   document.getElementById("s_smsCode").style.display="block";
	    	   $("#s_smsCode").removeClass("xf_register_intext");
		       $("#s_smsCode").removeClass("xf_register_intext3");
			   $("#s_smsCode").addClass("xf_register_intext1");
		       $("#s_smsCode").html("请填写短信校验码");
	          return;
	       }else{
	    	  
	    	   document.getElementById("s_smsCode").style.display="none";
				$("#s_smsCode").removeClass("xf_register_intext1");
          		$("#s_smsCode").removeClass("xf_register_intext");
		    	$("#s_smsCode").addClass("xf_register_intext3");
				$("#s_smsCode").html('&nbsp;');  
	       }
	       
	       
	     /*  var verifyMobile = #{jsAction @verifySmsCodeForReg(':mobile',':smsCode')/}
	 	  $.post(verifyMobile({mobile:$("#mobile").val().trim(),smsCode:$("#smsCode").val()}),function(data){
	 		  if(data.code < 0){
	 	    	 $("#s_smsCode").removeClass("xf_register_intext");
	 		     $("#s_smsCode").removeClass("xf_register_intext3");
	 			 $("#s_smsCode").addClass("xf_register_intext1");
	 	   		 $("#s_smsCode").html(data.msg);
	 		  }else{
	 	    	 $("#s_smsCode").removeClass("xf_register_intext1");
	 			 $("#s_smsCode").addClass("xf_register_intext");
	 			 $("#s_smsCode").addClass("xf_register_intext3");
	 	   		 $("#s_smsCode").html('');
	 	    	 $("#submit").submit();
	 		  }
	 	  },'json');*/
	 	  
	        var verifyMobile = #{jsAction @verifySmsCodeForReg(':mobile',':smsCode')/}
		  	$.post(verifyMobile({mobile:$("#mobile").val().trim(),smsCode:$("#smsCode").val()}),function(data){
			    if(data.code < 0){
			    	 document.getElementById("s_smsCode").style.display="block";
			    	 $("#s_smsCode").removeClass("xf_register_intext");
				       $("#s_smsCode").removeClass("xf_register_intext3");
					   $("#s_smsCode").addClass("xf_register_intext1");
			    	$("#s_smsCode").html(data.msg);
			    }else{
			    	$("#s_smsCode").removeClass("xf_register_intext1");
	          		$("#s_smsCode").removeClass("xf_register_intext");
			    	$("#s_smsCode").addClass("xf_register_intext3");
					document.getElementById("s_smsCode").style.display="none";
			    	$("#s_smsCode").html('');
			    	if(!$("input[type='checkbox'][id='suggest']").is(':checked')){
			        	  
			        	  alert("请阅读同意注册协议");
			        	  
			        	  return;
			          }
				    $("#submit").submit();
				}
			},'json');
	   } 
	 
	 
     var remain = 120;

     function countDown() {
       if (remain == 0) {
         remain = 120;
         $("#sendSmsCode").html("点击发送");
         $("#sendSmsCode").attr("onclick", "sendCode();");
         $("#sendSmsCode").attr("style", "cursor:pointer");

         return;
       }

       $("#sendSmsCode").html("" + remain-- + "秒后重发");
       setTimeout("countDown()",1000);
     }

     function sendCode(){
     	var mobile = $("#mobile").val().trim();
     	var code = '';
     	var randomId = '';
     	
     	if(mobile == ""){
     		document.getElementById("s_smsCode").style.display="block";
        	 $("#s_mobile").removeClass("xf_register_intext");
             $("#s_mobile").removeClass("xf_register_intext3");
     		 $("#s_mobile").addClass("xf_register_intext1");
             $("#s_mobile").html("请输入手机号码");
          	return;
         }else if(!(mobile).isMobileNum()){
        	 document.getElementById("s_smsCode").style.display="block";
        	 $("#s_mobile").removeClass("xf_register_intext");
             $("#s_mobile").removeClass("xf_register_intext3");
     		 $("#s_mobile").addClass("xf_register_intext1");
             $("#s_mobile").html("手机号格式有误");
          	return;
         }else{
        	 
        	$("#s_smsCode").removeClass("xf_register_intext1");
       		$("#s_smsCode").removeClass("xf_register_intext");
	    	$("#s_smsCode").addClass("xf_register_intext3");
			document.getElementById("s_smsCode").style.display="none";
         }
     	 
     	
     	code = $("#code").val().trim();
     	randomID = $("#randomID").val().trim();
     	
     	if(code == '') {
     		document.getElementById("s_code").style.display="block";
      	   	$("#s_code").removeClass("xf_register_intext");
     	       $("#s_code").removeClass("xf_register_intext3");
     		   $("#s_code").addClass("xf_register_intext1");
     	       $("#s_code").html("请输入验证码");
      		  return;
         }else{
        	 
        	 $("#s_code").removeClass("xf_register_intext1");
       		$("#s_code").removeClass("xf_register_intext");
 	    	$("#s_code").addClass("xf_register_intext3");
 			document.getElementById("s_code").style.display="none";
         }
     	
         var verifyMobile = #{jsAction @verifyMobileForReg(':mobile',':code',':randomID')/}
     	$.post(verifyMobile({mobile:mobile,code:code,randomID:randomID}),function(data){
     	    if(data.code < 0){
     	    	document.getElementById("s_code").style.display="block";
          	   	$("#s_code").removeClass("xf_register_intext");
         	       $("#s_code").removeClass("xf_register_intext3");
         		   $("#s_code").addClass("xf_register_intext1");
     	    	$("#s_code").html(data.msg);
     	    	change();
     	    }else{
     	    	 $("#s_code").removeClass("xf_register_intext1");
            		$("#s_code").removeClass("xf_register_intext");
      	    	$("#s_code").addClass("xf_register_intext3");
     	    	$("#s_code").html("");
     			countDown();
     			$("#sendSmsCode").attr("onclick", "void(0);");
     			$("#sendSmsCode").attr("style", "cursor: default");
     		}
     	},'json');
     }
     
	   
	   function focusError(){
		$(".xf_register_intext1").first().parent().find('input').first().focus();
		}
		// 文本框获取焦点
		$(function(){
			$(".p_text").bind({ 
				 focus:function(){ 
					if (this.value == this.defaultValue){
						this.value="";
						}
					},
				blur:function(){
					if (this.value == ""){ 
						this.value = this.defaultValue; 
					}
				} 
			}); 
		})

	// 登录密码框
	   $(function(){
	   	$(".p_pass").bind({
	           focus:function(){ 
	   			$(this).siblings("label").hide()
	   		},
	   		blur:function(){
	   			if (this.value == ""){ 
	   				$(this).siblings("label").show()        		
	               } 
	           } 
	   		
	   	})
	   });
	</script>
</html>